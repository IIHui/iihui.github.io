<!DOCTYPE HTML>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" /> 
    <title>selection 对象 - Keep It Simple</title>
    <meta name="keywords" content="博客,思考,读书,笔记,技术,分享">
    
    <meta property="og:title" content="selection 对象">
    <meta property="og:site_name" content="Keep It Simple">
    <meta property="og:image" content="/img/author.jpg"> 
    <meta name="title" content="selection 对象 - Keep It Simple" />
    <meta name="description" content="Swift | Go | C&#43;&#43; "> 
    <link rel="shortcut icon" href="https://iihui.github.io/img/favicon.ico" />
    <link rel="apple-touch-icon" href="https://iihui.github.io/img/apple-touch-icon.png" />
    <link rel="apple-touch-icon-precomposed" href="https://iihui.github.io/img/apple-touch-icon.png" />
    <link href="https://iihui.github.io/js/vendor/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />
    <link href="https://iihui.github.io/js/vendor/fancybox/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />
    <link href="https://iihui.github.io/css/main.css" rel="stylesheet" type="text/css" />
    <link href="https://iihui.github.io/css/syntax.css" rel="stylesheet" type="text/css" />

    <script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
     fancybox: true, 
    motion: true
  };
</script>

    <link href="https://cdn.bootcss.com/highlight.js/9.12.0/styles/monokai-sublime.min.css" rel="stylesheet">
    <script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/go.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/swift.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/languages/objectivec.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/languages/clojure.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/languages/cpp.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/languages/kotlin.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/languages/yaml.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
</head>
<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">
<div class="container one-collumn sidebar-position-left page-home  ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"> <div class="site-meta  custom-logo ">

  <div class="custom-logo-site-title">
    <a href="https://iihui.github.io/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Keep It Simple</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">靡不有初，鲜克有终</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
    <ul id="menu" class="menu">
      
      
        <li class="menu-item ">
          <a href="https://iihui.github.io/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />首页
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="https://iihui.github.io/tags/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-tag"></i> <br />标签
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="https://iihui.github.io/post/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />归档
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="https://iihui.github.io/categories/%E7%BE%8E%E9%A3%9F/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-fire"></i> <br />美食
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="https://iihui.github.io/categories/%E5%90%8E%E6%9C%9F/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-edit"></i> <br />后期
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="https://iihui.github.io/categories/%E6%97%85%E8%A1%8C/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-leaf"></i> <br />旅行
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="https://iihui.github.io/about/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />关于
          </a>
        </li>
      
      <li class="menu-item menu-item-search">
        <a href="javascript:;" class="popup-trigger"> <i class="menu-item-icon fa fa-search fa-fw"></i> <br /> 搜索</a>
      </li>
    </ul>
    <div class="site-search">
      <div class="popup">
 <span class="search-icon fa fa-search"></span>
 <input type="text" id="local-search-input">
 <div id="local-search-result"></div>
 <span class="popup-btn-close">close</span>
</div>

    </div>
</nav>
<script type="text/javascript"
        async
        src="https://cdn.bootcss.com/mathjax/2.7.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
		<!-- src = "http://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"> <\!--  -\-> -->
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$'], ['\[\[','\]\]']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
    TeX: { equationNumbers: { autoNumber: "AMS" },
         extensions: ["AMSmath.js", "AMSsymbols.js"] }
  }
});

MathJax.Hub.Queue(function() {
    
    
    
    var all = MathJax.Hub.getAllJax(), i;
    for(i = 0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
});
</script>

<style>
code.has-jax {
    font: inherit;
    font-size: 100%;
    background: inherit;
    border: inherit;
    color: #515151;
}
</style>

<!DOCTYPE html>
<html lang="en">


<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.0-rc.1/dist/katex.min.css" integrity="sha384-D+9gmBxUQogRLqvARvNLmA9hS2x//eK1FhVb9PiU86gmcrBrJAQT8okdJ4LMp2uv" crossorigin="anonymous">

    
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.0-rc.1/dist/katex.min.js" integrity="sha384-483A6DwYfKeDa0Q52fJmxFXkcPCFfnXMoXblOkJ4JcA8zATN6Tm78UNL72AKk+0O" crossorigin="anonymous"></script>
</head>
<body>

</body>
</html>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
<section id="posts" class="posts-expand">
  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link" href="https://iihui.github.io/post/js-selection/" itemprop="url">
        selection 对象
        </a>
      </h1>
      <div class="post-meta">
      <span class="post-time">
<span class="post-meta-item-icon">
    <i class="fa fa-calendar-o"></i>
</span>
<span class="post-meta-item-text">创建: </span>
<time itemprop="dateCreated" datetime="2016-03-22T13:04:35+08:00" content="2018-12-17">
    2018-12-17
</time>
</span>
&nbsp; | &nbsp;
<span class="post-updated-time">
<span class="post-meta-item-icon">
    <i class="fa fa-calendar-check-o"></i>
</span>
<span class="post-meta-item-text">更新: </span>
<time itemprop="dateUpdated" content="2018-12-17">
    2018-12-17
</time>
</span> 
      

  <span class="post-category" >
  &nbsp; | &nbsp;
  <span class="post-meta-item-icon">
    <i class="fa fa-folder-o"></i>
  </span>
  <span class="post-meta-item-text">分类: </span>
  
    <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
      <a href="https://iihui.github.io/categories/code" itemprop="url" rel="index">
        <span itemprop="name">code</span>
      </a>
      &nbsp; 
    </span>
  
</span>


      <span>
&nbsp; | &nbsp;
<span class="post-meta-item-icon">
    <i class="fa fa-file-word-o"></i>
</span>
<span class="post-meta-item-text">字数: </span>
<span class="leancloud-visitors-count">15461</span>
&nbsp; | &nbsp;
<span class="post-meta-item-icon">
    <i class="fa fa-coffee"></i>
</span>
<span class="post-meta-item-text">阅读: </span>
<span class="leancloud-visitors-count">31 分钟</span>
</span>
      </div>
    </header>
    <div class="post-body" itemprop="articleBody">
    <blockquote>
<p>在富文本编辑器中，需要控制光标的各种状态信息，位置信息。浏览器提供了<code>selection</code>对象和<code>range</code>对象来操作光标。</p>
</blockquote>
<h2 id="selection">selection</h2>
<p><code>Selection</code>对象表示<font color=red>用户选择的文本范围或插入符号的当前位置</font>。它代表页面中的<font color=red>文本选区</font>，<font color=Blue>可能横跨多个元素<code>(element)</code></font>，文本选区由用户<font color=Blue>拖拽鼠标</font>而产生。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">selection</span> <span style="color:#f92672">=</span> window.<span style="color:#a6e22e">getSelection</span>();
</span></span></code></pre></div><p>通常需要操作<code>selection</code>对象所对应的用户选择区<code>(range)</code>(俗称<font color=Blue>拖蓝</font>)，获取方式为:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">selection</span>.<span style="color:#a6e22e">rangeCount</span> <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">range</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">selection</span>.<span style="color:#a6e22e">getRangeAt</span>(<span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#75715e">//或者
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">selection</span>.<span style="color:#a6e22e">rangeCount</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">range</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">selection</span>.<span style="color:#a6e22e">getRangeAt</span>(<span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><hr>
<h2 id="range对象">range对象</h2>
<p><code>range</code>对象代表页面上<font color=red>一段连续的区域</font>，通过<code>range</code>对象可以<font color=Blue>获取或者修改</font>页面上的任何区域，也可以通过<code>Range</code>的方法进行<font color=Blue>复制和移动</font>页面上的任何区域。</p>
<p><img src="https://i.loli.net/2018/12/18/5c18b8dbd9942.jpg" alt="-c600"></p>
<ul>
<li>
<p><code>startContainer</code>: <code>range</code>范围的起始节点。</p>
</li>
<li>
<p><code>endContainer</code>:<code>range</code> 范围的结束节点。</p>
</li>
<li>
<p><code>startOffset</code>: 如果<code>startContainer</code>是<font color=Blue>文本节点、注释节点、或者<code>CDATA</code>节点</font>，则返回起点在<code>startContainer</code>中的字符偏移量，如果<code>startContainer</code>是<font color=red>元素节点</font>，则返回起点在<code>startContainer.childNodes</code>中的次序。</p>
</li>
<li>
<p><code>endOffset</code>: 表示终点，含义与<code>startOffset</code>类似。</p>
</li>
<li>
<p><code>commonAncestorContainer</code>: 返回包含<code>startContainer</code>和<code>endContainer</code>的最近祖先节点。</p>
</li>
<li>
<p><code>collapsed</code>:返回一个用于判断<code>range</code>起始位置和终止位置<font color=LightSeaGreen>是否相同的布尔值</font>。</p>
</li>
</ul>
<p><img src="https://i.loli.net/2018/12/18/5c18ba277dc61.jpg" alt="-c600"></p>
<hr>
<h2 id="range常用方法">range常用方法</h2>
<ul>
<li>
<p><code>setStart(node,offset)</code>:设置起点的位置，<code>node</code>是对<code>startContainer</code>的引用，偏移则是<code>startOffset</code>。</p>
</li>
<li>
<p><code>setEnd(node,offset)</code>: 设置的终点的位置，<code>node</code>是对<code>endContainer</code>的引用，偏移则是<code>endOffset</code>。</p>
</li>
<li>
<p><code>selectNode(referenceNode)</code>：设置<code>Range</code>的范围，包括<code>referenceNode</code>和它的所有子孙节点。</p>
</li>
<li>
<p><code>selectNodeContents(referenceNode)</code>设置<code>Range</code>的范围，包括它的<font color=Blue>所有后代节点</font>，但<font color=red>不包含</font><code>referenceNode</code>节点。与<code>selectNode</code>区别较大。</p>
</li>
<li>
<p><code>collapse(bool)</code>: 向起点<code>start</code>折叠。</p>
</li>
<li>
<p><code>insertNode(node)</code>: 在<code>range</code>的<font color=Blue>起始处</font>插入节点。</p>
</li>
<li>
<p><code>cloneRange()</code>: 返回一个当前<code>Range</code>的副本</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">resetRange</span>(<span style="color:#a6e22e">startContainer</span>, <span style="color:#a6e22e">startOffset</span>, <span style="color:#a6e22e">endContainer</span>, <span style="color:#a6e22e">endOffset</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">selection</span> <span style="color:#f92672">=</span> window.<span style="color:#a6e22e">getSelection</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">selection</span>.<span style="color:#a6e22e">removeAllRanges</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">range</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">createRange</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">range</span>.<span style="color:#a6e22e">setStart</span>(<span style="color:#a6e22e">startContainer</span>, <span style="color:#a6e22e">startOffset</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">range</span>.<span style="color:#a6e22e">setEnd</span>(<span style="color:#a6e22e">endContainer</span>, <span style="color:#a6e22e">endOffset</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">selection</span>.<span style="color:#a6e22e">addRange</span>(<span style="color:#a6e22e">range</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><a href="https://www.jianshu.com/p/ad2f818cc3b0">参考资料</a></p>
<h1 id="chapter-1">Chapter 1</h1>
<p>在ES6及更高版本中，有一种定义函数的简洁语法。这种简洁的语法使用<code>=&gt;</code>来分隔参数列表和函数体，以这种方式定义的函数被称为箭头函数。箭头函数最常用于将一个未命名的函数作为参数传递给另一个函数。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">plus1</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">x</span> =&gt; <span style="color:#a6e22e">x</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">square</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">x</span> =&gt; <span style="color:#a6e22e">x</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">x</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">plus1</span>(<span style="color:#ae81ff">12</span>))
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">square</span>(<span style="color:#ae81ff">3</span>))
</span></span></code></pre></div><h1 id="chapter-2">Chapter 2</h1>
<p>JavaScript是一种<font color=red>区分大小写的语言</font>，并会忽略程序中标记之间的空格。多数情况下，也会忽略换行符（但有例外）。因为可以在程序中自由使用空格和换行符，因此可以以整齐一致的方式格式化和缩进程序，使代码易于阅读和理解。</p>
<p>像其它语言一样，JavaScript使用分号分隔不同的语句。<font color=red>若两条语句分别写在不同的行上，通常可以省略它们之间的分号</font>。</p>
<p>需要注意的是，并不是将每一个换行符都视为分号，只有在不添加隐式分号就无法继续解析代码的情况下，才会将换行符视为分号。更确切地说（除了稍后要介绍的三种例外情况），如果下一个非空格字符不能被解释为当前语句的继续，才会将换行符视为分号。</p>
<h1 id="chapter-3">Chapter 3</h1>
<p><code>JavaScript</code>的类型被分为两大类，基础类型和对象类型。<code>JavaScript</code>中的特殊值<code>null</code>和<code>undefined</code>也是基础类型值，但它们不是数值，字符串或布尔值。<font color=red>这两个值通常认为是各自特殊类型的唯一成员</font>。</p>
<p>任何值，只要不是数字、字符串、布尔值、<code>Symbol</code>、<code>null</code>或<code>undefined</code>都是对象。对象是属性的集合，每个属性都有一个名称和一个值。普通的对象是<font color=Blue>无序的名字和值的集合</font>，函数和类也是特殊的对象。</p>
<h2 id="number">Number</h2>
<p><code>JavaScript</code>中的算术运算在<font color=red>溢出、下溢或除以零的情况下都不会产生错误</font>。当数值运算的结果超过最大可表示的数值（溢出）时，其结果是一个特殊的无穷大值，即<code>Infinity</code>。同样，当负值的绝对值大于最大可表示负数的绝对值时，结果就是负无穷大，即<code>-Infinity</code>。无穷大数值的行为与我们所期望的一样，与任何数值相加、相减、相乘或相除的结果都是无穷大数值（可能符号相反）。</p>
<p>当数值运算的结果<font color=red>比可表示的最小数字更接近零时，就会出现下溢</font>。在这种情况下，<code>JavaScript</code>返回0。如果负数出现下溢，<code>JavaScript</code>会返回一个被称为<code>negative zero</code>特殊值。这个值与普通的0几乎没有区别，很少的情况需要区别。</p>
<p>在<code>JavaScript</code>中，<font color=LightSeaGreen>除以0并不会产生一个错误</font>，它只是简单的返回正无穷和负无穷。但有一个例外，<font color=red>0除以0并不会返回一个明确定义的值，而是返回<code>NaN</code></font>。如果尝试用无穷大除以无穷大、取负数的平方根或使用不能转换为数字的非数字操作数的算术运算符，也会出现<code>NaN</code>。</p>
<p><code>JavaScript</code>预定义了全局常量<code>Infinity</code>和<code>NaN</code>，用于保存正无穷大和非数字值，这些值也可以作为<code>Number</code>对象的属性使用：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#66d9ef">Infinity</span>, Number.<span style="color:#a6e22e">POSITIVE_INFINITY</span>, <span style="color:#ae81ff">1</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">0</span>, Number.<span style="color:#a6e22e">MAX_VALUE</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#f92672">-</span><span style="color:#66d9ef">Infinity</span>, Number.<span style="color:#a6e22e">NEGATIVE_INFINITY</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">0</span>, <span style="color:#f92672">-</span>Number.<span style="color:#a6e22e">MAX_VALUE</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#66d9ef">NaN</span>, Number.<span style="color:#66d9ef">NaN</span>, <span style="color:#ae81ff">0</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">0</span>, <span style="color:#66d9ef">Infinity</span> <span style="color:#f92672">/</span> <span style="color:#66d9ef">Infinity</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(Number.<span style="color:#a6e22e">MIN_VALUE</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>, <span style="color:#f92672">-</span>Number.<span style="color:#a6e22e">MIN_VALUE</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span> <span style="color:#f92672">/</span> <span style="color:#66d9ef">Infinity</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 打印的值
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">Infinity</span> <span style="color:#66d9ef">Infinity</span> <span style="color:#66d9ef">Infinity</span> <span style="color:#66d9ef">Infinity</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">-</span><span style="color:#66d9ef">Infinity</span> <span style="color:#f92672">-</span><span style="color:#66d9ef">Infinity</span> <span style="color:#f92672">-</span><span style="color:#66d9ef">Infinity</span> <span style="color:#f92672">-</span><span style="color:#66d9ef">Infinity</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">NaN</span> <span style="color:#66d9ef">NaN</span> <span style="color:#66d9ef">NaN</span> <span style="color:#66d9ef">NaN</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">0</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0</span>
</span></span></code></pre></div><p><code>NaN</code>有一个不同寻常的特性：<font color=red>它不会与任何其它值（包括自己）进行比较</font>。这意味着不能使用<code>x === NAN</code>来判断<code>x</code>的值是否为<code>NaN</code>。相反，必须写成<code>x != x</code>或<code>Number.isNaN(x)</code>。当且仅当<code>x</code>的值与全局常量<code>NaN</code>相同时，这些表达式才会为<code>true</code>。</p>
<p>全局函数<code>isNaN()</code>和<code>Number.isNaN()</code>是相似的。如果参数为<code>NaN</code>，或者参数为无法转换为数字的非数值，则返回<code>true</code>。如果函数<code>Number.isFinite()</code>的参数是<code>NaN、Infinity</code>或<code>-Infinity</code>以外的数字，则返回<code>true</code>。如果全局函数<code>isFinite()</code>的参数是或可以转换为有限数值，该函数将返回<code>true</code>。</p>
<p>负零值也有些不同寻常，<font color=red>它与正零比较是相等的</font>（即使是使用<code>JavaScript</code>的严格相等测试），这意味着这两个值几乎没有区别，除非用作除数时：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-swift" data-lang="swift"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> zero = <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> negz = <span style="color:#f92672">-</span><span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>console.log(zero === negz)
</span></span><span style="display:flex;"><span>console.log(<span style="color:#ae81ff">1</span> <span style="color:#f92672">/</span> zero === <span style="color:#ae81ff">1</span> <span style="color:#f92672">/</span> negz)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 打印的结果</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">false</span>
</span></span></code></pre></div><h3 id="binary-floating-point-and-rounding-errors">Binary Floating-Point and Rounding Errors</h3>
<p>实数有无限多个，但<code>JavaScript</code>的浮点格式只能表示其中有限个数据。也就是说，在 <code>JavaScript</code>中处理实数时，数字的表示往往是实际数字的近似值。</p>
<p><code>JavaScript</code>使用的<code>IEEE-754</code>浮点表示法是一种二进制表示法。这种表示法可以精确地表示<code>1/2</code>,<code>1/8</code>和<code>1/1024</code>等，但不能精确的表示<code>0.1</code>。虽然<code>JavaScript</code>有足够高的精度，能够让数值非常近似地表示<code>0.1</code>，但无法精确地表示，这可能导致一些问题：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-swift" data-lang="swift"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> x = .<span style="color:#ae81ff">3</span> <span style="color:#f92672">-</span> .<span style="color:#ae81ff">2</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> y = .<span style="color:#ae81ff">2</span> <span style="color:#f92672">-</span> .<span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>console.log(x === y)
</span></span><span style="display:flex;"><span>console.log(x === .<span style="color:#ae81ff">1</span>, y === .<span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 打印的结果</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">false</span> <span style="color:#66d9ef">true</span>
</span></span></code></pre></div><p>上面代码中，由于舍入误差<code>.3</code>和<code>.2</code>近似值之差与<code>.2</code>和<code>.1</code>近似值之差并不相等。但这并不是JavaScript特有的问题，而是所有使用二进制浮点数的编程语言共有的问题。</p>
<p>此外，请注意上面代码中的<code>x</code>和<code>y</code>值非常接近，也极其接近正确值。计算出来的值几乎可以满足任何需要，但当我们试图比较值是否相等时才会出现问题。</p>
<p>如果使用浮点近似值对我们的程序有问题，<font color=red>可以考虑使用缩放整数</font>。例如，可以使用整数值而不是小数值来处理货币。</p>
<h3 id="arbitrary-precision-integers-with-bigint">Arbitrary Precision Integers with BigInt</h3>
<p>在ES2020中定义的JavaScript最新特性之一是一种名为BigInt的新数值类型。顾名思义，BigInt是一种数值类型，其值为整数。</p>
<p>将<code>BigInt</code>添加到JavaScript中<font color=LightSeaGreen>主要是为了允许表示64位整数</font>，这是与许多其他编程语言和API兼容所必需的。如果需要处理比较大的数字，<code>BigInt</code>值以有数千甚至数百万位。但请注意，<font color=red>BigInt并不适合用于加密，因为它实现时没有考虑防止时序攻击</font>。</p>
<p><code>BigInt</code>字面量是一串数字后面跟小写字母n。默认情况下，它的基数是10，但可以通过前置0b,0o和0x来表示二进制、八进制和十六进制。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#ae81ff">1234</span><span style="color:#a6e22e">n</span>, <span style="color:#ae81ff">0b11111</span><span style="color:#a6e22e">n</span>, <span style="color:#ae81ff">0o7777</span><span style="color:#a6e22e">n</span>, <span style="color:#ae81ff">0x8000000</span><span style="color:#a6e22e">n</span>)
</span></span></code></pre></div><p>可以使用<code>BigInt()</code>函数把普通的数值或字符串转换为<code>BigInt</code>值:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">BigInt</span>(Number.<span style="color:#a6e22e">MAX_SAFE_INTEGER</span>))
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">string</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;1&#34;</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;0&#34;</span>.<span style="color:#a6e22e">repeat</span>(<span style="color:#ae81ff">100</span>);
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">BigInt</span>(<span style="color:#a6e22e">string</span>))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 打印的值
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#ae81ff">9007199254740991</span><span style="color:#a6e22e">n</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6410000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000</span><span style="color:#a6e22e">n</span>
</span></span></code></pre></div><p><code>BigInt</code>的算术运算与JavaScript常规数值的算术运算类似，只不过<font color=red>除法会丢弃余数，并向下取整</font>。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#ae81ff">1000</span><span style="color:#a6e22e">n</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">2000</span><span style="color:#a6e22e">n</span>, <span style="color:#ae81ff">2000</span><span style="color:#a6e22e">n</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">3000</span><span style="color:#a6e22e">n</span>, <span style="color:#ae81ff">3000</span><span style="color:#a6e22e">n</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">997</span><span style="color:#a6e22e">n</span>, <span style="color:#ae81ff">3000</span><span style="color:#a6e22e">n</span> <span style="color:#f92672">%</span> <span style="color:#ae81ff">997</span><span style="color:#a6e22e">n</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 打印的值
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#ae81ff">3000</span><span style="color:#a6e22e">n</span> <span style="color:#ae81ff">6000000</span><span style="color:#a6e22e">n</span> <span style="color:#ae81ff">3</span><span style="color:#a6e22e">n</span> <span style="color:#ae81ff">9</span><span style="color:#a6e22e">n</span>
</span></span></code></pre></div><p>虽然<code>+, -, *, /, %,</code> 和<code>**</code>运算符号可以用于<code>BigInt</code>，但必须注意的是，不能将<code>BigInt</code>类型的操作数与普通数字操作数混合使用。</p>
<p>但是，比较运算符可以处理混合类型。位操作数通常可以用于<code>BigInt</code>操作数，但<code>Math</code>对象的任何函数都不接收<code>BigInt</code>操作数。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">timestamp</span> <span style="color:#f92672">=</span> Date.<span style="color:#a6e22e">now</span>(); <span style="color:#75715e">// The current time as a timestamp (a number).
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">now</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Date(); <span style="color:#75715e">// The current time as a Date object.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">ms</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">now</span>.<span style="color:#a6e22e">getTime</span>(); <span style="color:#75715e">// Convert to a millisecond timestamp.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">iso</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">now</span>.<span style="color:#a6e22e">toISOString</span>(); <span style="color:#75715e">// Convert to a string in standard format.
</span></span></span></code></pre></div><h2 id="text">Text</h2>
<p>表示文本的类型是字符串。字符串是由<code>16bit</code>值组成的不可变的有序序列，每个数值通常代表一个Unicode字符。字符串的长度就是它包含16bit值的个数。JavaScript的字符串（及其数组）使用基于0的索引，第一个16bit值的索引为0，第二个16bit值的索引为1，以此类推。</p>
<p>空字符串就是长度为0的字符串。 JavaScript<font color=Blue>没有表示字符串中单个元素的特殊类型</font>。若要表示单个16bit值，只需使用长度为1的字符串。</p>
<p>JavaScript使用UTF-16编码Unicode字符集 ，字符串是无符号16bit值序列。最常见的Unicode字符，它的码点适合16bit，并且可以用字符串的一个元素来表示。若Unicode字符的码点不适合用16bit来表示的，则使用UTF-16规则编码为两个16bit值的序列（称为surrogate pair）。这意味着长度为2（两个16bit值）的JavaScript字符串可能只代表一个Unicode字符：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-swift" data-lang="swift"><span style="display:flex;"><span>euro = <span style="color:#e6db74">&#34;€&#34;</span>;
</span></span><span style="display:flex;"><span>love = <span style="color:#e6db74">&#34;😍&#34;</span>;
</span></span><span style="display:flex;"><span>console.log(euro.length, love.length)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 打印的值</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span> <span style="color:#ae81ff">2</span>
</span></span></code></pre></div><p>JavaScript定义的<font color=red>大多数字符串方法都是对16bit值而非字符进行操作</font>。它们不会特殊处理<code>surrogate pair</code>，不会对字符串进行归一化处理，甚至不会确保字符串是格式正确的UTF-16字符串。</p>
<p>但是，在ES6中字符串是可迭代的，如果对字符串使用<code>for/of</code>循环或<code>...</code>操作符，迭代的是字符串而不是16bit值。</p>
<h3 id="string-literals">String Literals</h3>
<p>若要在JavaScript中使用字符串字面量，可以把字符串放到<font color=red>一对匹配的单引号，双引号或者反引号中</font>。双引号和反引号字符可以出现在由单引号包含的字符串，反引号和单引号类似。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#e6db74">&#34;&#34;</span> <span style="color:#75715e">// The empty string: it has zero characters 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#e6db74">&#39;testing&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;3.14&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#39;name=&#34;myform&#34;&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;Wouldn&#39;t you prefer O&#39;Reilly&#39;s book?&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;τ is the ratio of a circle&#39;s circumference to its radius&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">`&#34;She said &#39;hi&#39;&#34;, he said.`</span>
</span></span></code></pre></div><p>使用<font color=red>反引号包含字符串是ES6的一大特色</font>，它允许将表达式插值到字符串字面中。最早版本的JavaScript要求字符串字面量写在一行上，因此可能经常看到代码通过使用<code>+</code>运算符连接单行字符串来创建长字符串。</p>
<p>但是，从ES5开始，可以在每一行（最后一行除外）的结尾使用反斜线，将字符串字面量分成多行。<font color=red>反斜线和它后面的行结束符都不是字符串字面量的一部分</font>。</p>
<p>如果需要在单引号或双引号字符串字面量中包含换行符，需要使用字符<code>\n</code>。ES6的字符串反引号语法允许将字符串分成多行，在这种情况下，行结束符是字符串字面量的一部分：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#75715e">// A string representing 2 lines written on one line:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#e6db74">&#39;two\nlines&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// A one-line string written on 3 lines:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#e6db74">&#34;one\
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">long\
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">line&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// A two-line string written on two lines:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#e6db74">`the newline character at the end of this line 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">is included literally in this string`</span>
</span></span></code></pre></div><p>需要注意的是，在使用单引号定界字符串时，必须注意英文里的缩写和所有格形式，比如<code>can't</code>和<code>O'Reilly</code>中的单引号，此时需要使用反斜杠字符进行转义：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#e6db74">&#39;You\&#39;re right, it can\&#39;t be a quote&#39;</span>
</span></span></code></pre></div><p>反斜杠在JavaScript字符串中有特殊作用，它与后面的字符组合在一起，可以在字符串中表示一个无法直接表示的字符，例如<code>\n</code>表示一个换行符。在上面示例代码中，之所以称为转义序列，就是<font color=red>反斜杠转换了通常意义上单引号的含义</font>，不再表示字符串定界符。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">str</span> <span style="color:#f92672">=</span>  <span style="color:#e6db74">&#39;dddt\oonnn&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">str</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 打印的结果
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">dddtoonnn</span>
</span></span></code></pre></div><p>拼接字符串是JavaScript的一个内置特性，如果对字符串使用<code>+</code>操作符，那么字符串就会拼接起来。可以使用标准的<code>===</code>或<code>!==</code>操作符比较字符串，只有当这两个字符串具有<font color=Blue>完全相同的<code>16bit</code>序列值才相等</font>。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">msg</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Hello,&#34;</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;world&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">greeting</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Welcome to my blog&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">greeting</span>)
</span></span></code></pre></div><p>字符串也可以使用<code>&lt;,&lt;=,&gt;,&gt;=</code>操作符，字符串的比较都是<font color=red>通过比较<code>16bit</code>值来完成的</font>。要确定一个字符串的长度可以使用其<code>length</code>属性：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">length</span>
</span></span></code></pre></div><p>字符串还有其它相关API：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">s</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Hello,&#34;</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;world&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Obtaining portions of a string
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">substring</span>(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">4</span>) <span style="color:#75715e">// ell
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">slice</span>(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">4</span>)  <span style="color:#75715e">// ell
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">slice</span>(<span style="color:#f92672">-</span><span style="color:#ae81ff">3</span>)  <span style="color:#75715e">// rld
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">split</span>(<span style="color:#e6db74">&#34;, &#34;</span>) <span style="color:#75715e">// [&#34;Hello&#34;,&#34;world&#34;]
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Searching a string
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">indexOf</span>(<span style="color:#e6db74">&#34;l&#34;</span>) <span style="color:#75715e">// 2: position of first letter l
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">indexOf</span>(<span style="color:#e6db74">&#34;l&#34;</span>, <span style="color:#ae81ff">3</span>) <span style="color:#75715e">// 3: position of first &#34;l&#34; at or after 3
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">indexOf</span>(<span style="color:#e6db74">&#34;zz&#34;</span>)  <span style="color:#75715e">// -1: s does not include the substring &#34;zz&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">lastIndexOf</span>(<span style="color:#e6db74">&#34;l&#34;</span>) <span style="color:#75715e">// 10: position of last letter l
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Boolean searching functions in ES6 and later 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">startsWith</span>(<span style="color:#e6db74">&#34;Hell&#34;</span>) <span style="color:#75715e">// =&gt; true: the string starts with these 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">endsWith</span>(<span style="color:#e6db74">&#34;!&#34;</span>) <span style="color:#75715e">// =&gt; false: s does not end with that 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">includes</span>(<span style="color:#e6db74">&#34;or&#34;</span>) <span style="color:#75715e">// =&gt; true: s includes substring &#34;or&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Creating modified versions of a string
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">replace</span>(<span style="color:#e6db74">&#34;llo&#34;</span>, <span style="color:#e6db74">&#34;ya&#34;</span>) <span style="color:#75715e">// =&gt; &#34;Heya, world&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">toLowerCase</span>()
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">toUpperCase</span>()
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">normalize</span>()   <span style="color:#75715e">// Unicode NFC normalization: ES6
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">normalize</span>(<span style="color:#e6db74">&#34;NFD&#34;</span>) <span style="color:#75715e">// NFD normalization. Also &#34;NFKC&#34;, &#34;NFKD&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Inspecting individual (16-bit) characters of a string
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">charAt</span>(<span style="color:#ae81ff">0</span>) <span style="color:#75715e">// =&gt; &#34;H&#34;: the first character
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">charAt</span>(<span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">length</span><span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>) <span style="color:#75715e">// =&gt; &#34;d&#34;: the last character 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">charCodeAt</span>(<span style="color:#ae81ff">0</span>) <span style="color:#75715e">// =&gt; 72: 16-bit number at the specified position 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">codePointAt</span>(<span style="color:#ae81ff">0</span>) <span style="color:#75715e">// =&gt; 72: ES6, works for codepoints &gt; 16 bits
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// String padding functions in ES2017
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#e6db74">&#34;x&#34;</span>.<span style="color:#a6e22e">padStart</span>(<span style="color:#ae81ff">3</span>) <span style="color:#75715e">// =&gt; &#34;  x&#34;: add spaces on the left to a length of 3
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#e6db74">&#34;x&#34;</span>.<span style="color:#a6e22e">padEnd</span>(<span style="color:#ae81ff">3</span>) <span style="color:#75715e">// =&gt; &#34;x  &#34;: add spaces on the right to a length of 3
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#e6db74">&#34;x&#34;</span>.<span style="color:#a6e22e">padStart</span>(<span style="color:#ae81ff">3</span>, <span style="color:#e6db74">&#34;*&#34;</span>) <span style="color:#75715e">// =&gt; &#34;**x&#34;: add stars on the left to a length of 3
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#e6db74">&#34;x&#34;</span>.<span style="color:#a6e22e">padEnd</span>(<span style="color:#ae81ff">3</span>, <span style="color:#e6db74">&#34;-&#34;</span>) <span style="color:#75715e">// =&gt; &#34;x--&#34;: add dashes on the right to a length of 3
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Space trimming functions. trim() is ES5; others ES2019 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#e6db74">&#34; test &#34;</span>.<span style="color:#a6e22e">trim</span>() <span style="color:#75715e">// =&gt; &#34;test&#34;: remove spaces at start and end 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#e6db74">&#34; test &#34;</span>.<span style="color:#a6e22e">trimStart</span>() <span style="color:#75715e">// =&gt; &#34;test &#34;: remove spaces on left. Also trimLeft 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#e6db74">&#34; test &#34;</span>.<span style="color:#a6e22e">trimEnd</span>() <span style="color:#75715e">// =&gt; &#34; test&#34;: remove spaces at right. Also trimRight
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Miscellaneous string methods
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">concat</span>(<span style="color:#e6db74">&#34;!&#34;</span>) <span style="color:#75715e">// =&gt; &#34;Hello, world!&#34;: just use + operator instead 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#e6db74">&#34;&lt;&gt;&#34;</span>.<span style="color:#a6e22e">repeat</span>(<span style="color:#ae81ff">5</span>) <span style="color:#75715e">// =&gt; &#34;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&#34;: concatenate n copies. ES6
</span></span></span></code></pre></div><p>需要注意的是，<font color=red>字符串在JavaScript中是不可变的</font>。<code>replace()</code>和<code>toUpperCase()</code>等方法<font color=Blue>会返回新字符串</font>，它们不会修改原来的字符串。字符串能够被当作只读数组，可以使用方括号而不是<code>charAt()</code>访问字符串中的单个字符（<code>16bit</code>值）：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">s</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;hello, world&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">s</span>[<span style="color:#ae81ff">0</span>], <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">length</span> <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>])
</span></span></code></pre></div><h3 id="template-literals">Template Literals</h3>
<p>在 ES6及更高版本中，字符串字面量可以用反引号分隔：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">s</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">`hello world`</span>;
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">s</span>)
</span></span></code></pre></div><p>这不止是另一种表示字面量的表示方式，更是因为<code>template literals</code>能够包含任意的表达式。反引号字符串字面的最终值是先计算包含的表达式的值，然后将这些表达式计算后的值转换为字符串，最后将这些计算出的字符串与反引号字符串内的字面量相结合而得出：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">name</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Bill&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#75715e">// greeting == &#34;Hello Bill.&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">greeting</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">`Hello </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">name</span><span style="color:#e6db74">}</span><span style="color:#e6db74">.`</span>;
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">greeting</span>)
</span></span></code></pre></div><p>在<code>${}</code>中的内容被解释成表达式，而在花括号外的内容是普通的字符串字面量。模板字面量可能包含很多表达式，它<font color=red>可以包含任何普通字符串中能够出现的转义字符，也可以跨越多行而无需转义字符</font>。</p>
<p>下面的模板字面量包含四个JavaScript 表达式、一个<code>Unicode</code>转义序列和至少四个换行符（表达式值也可能包含换行符）：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">errorMessage</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">`\ 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">\u2718 Test failure at </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">filename</span><span style="color:#e6db74">}</span><span style="color:#e6db74">:</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">linenumber</span><span style="color:#e6db74">}</span><span style="color:#e6db74">: 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"></span><span style="color:#e6db74">${</span><span style="color:#a6e22e">exception</span>.<span style="color:#a6e22e">message</span><span style="color:#e6db74">}</span><span style="color:#e6db74"> Stack trace:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"></span><span style="color:#e6db74">${</span><span style="color:#a6e22e">exception</span>.<span style="color:#a6e22e">stack</span><span style="color:#e6db74">}</span><span style="color:#e6db74"> 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">`</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">errorMessage</span>)
</span></span></code></pre></div><p>上面字符串第一行末尾的反斜线转义了第一个换行符，因此生成的字符串以<code>Unicode </code>字符<code>✘</code>（<code>\u2718</code>）而不是换行符开始。</p>
<p>模板字面量的一个强大但不常用的功能是，如果函数名（或<code>tag</code>）出现在开头的反引号前面，<font color=red>那么模板字面量的文本和表达式的值就会传递给该函数</font>。这个<code>tagged template literal</code>的值就是这个函数的返回值。这个特性可以用于先对某些值进行HTML和SQL转义，然后再把它们插入文本。</p>
<p>ES6有一个内置的标签函数<code>String.raw()</code>，这个函数返回反引号中未经处理的文本，即不会处理任何反斜杠转义字符：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(String.<span style="color:#a6e22e">raw</span><span style="color:#e6db74">`\n`</span>.<span style="color:#a6e22e">length</span>);
</span></span></code></pre></div><p>自定义模板标签函数是JavaScript一个非常强大的特性，这些函数不需要返回字符串，并且可以被当成构造函数使用，就像为语言本身定义了一种新的字面量语法一样。</p>
<h3 id="pattern-matching">Pattern Matching</h3>
<p>JavaScript定义了一种称为正则表达式（或 <code>RegExp</code>）的数据类型，用于描述和匹配文本字符串中的模式。<code>RegExp</code> <font color=red>并不是基本数据类型之一</font>，但它们拥有像数字和字符串一样的字面语法，因此有时看起来像是基本数据类型。正则表达式字面的语法很复杂，而且它们定义的API也不简单。</p>
<p>一对斜杠之间的文本构成了正则表达式字面量，其中<font color=Blue>第二个斜杠后面可以跟着一个或多个字母</font>，用于修改模式的含义：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#e6db74">/^HTML/</span>; <span style="color:#75715e">// Match the letters H T M L at the start of a string
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#e6db74">/[1-9][0-9]*/</span>; <span style="color:#75715e">// Match a nonzero digit, followed by any of digits
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#e6db74">/\bjavascript\b/i</span>; <span style="color:#75715e">// Match &#34;javascript&#34; as a word, case-insensitive
</span></span></span></code></pre></div><p><code>RegExp</code>对象定义了一系列有用的方法，字符串也有方法接收<code>RegExp</code>参数：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">text</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;testing: 1, 2, 3&#34;</span>; <span style="color:#75715e">// Sample text
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">pattern</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">/\d+/g</span>; <span style="color:#75715e">// Matches all instances of one or more digits
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">pattern</span>.<span style="color:#a6e22e">test</span>(<span style="color:#a6e22e">text</span>)  <span style="color:#75715e">// =&gt; true: a match exists
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">text</span>.<span style="color:#a6e22e">search</span>(<span style="color:#a6e22e">pattern</span>) <span style="color:#75715e">// =&gt; 9: position of first match
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">text</span>.<span style="color:#a6e22e">match</span>(<span style="color:#a6e22e">pattern</span>) <span style="color:#75715e">// =&gt; [&#34;1&#34;, &#34;2&#34;, &#34;3&#34;]
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">text</span>.<span style="color:#a6e22e">replace</span>(<span style="color:#a6e22e">pattern</span>, <span style="color:#e6db74">&#34;#&#34;</span>) <span style="color:#75715e">// &#34;testing: #,#,#&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">text</span>.<span style="color:#a6e22e">split</span>(<span style="color:#e6db74">/\D+/</span>) <span style="color:#75715e">// [&#34;&#34;, &#34;1&#34;, &#34;2&#34;, &#34;3&#34;]  split on nondigits
</span></span></span></code></pre></div><h2 id="boolean-values">Boolean Values</h2>
<p><code>JavaScript</code>的<font color=red>任何值都可以转换为布尔值</font>，下面的值都会转为<code>false</code>。<code>false</code>和下面能转换为<code>false</code>的6个值，被称为<code>falsy</code>值：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">undefined</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">null</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">-</span><span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">NaN</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;&#34;</span> <span style="color:#75715e">// the empty string
</span></span></span></code></pre></div><p>其它的值，包括所有对象都能转换为<code>true</code>，<code>true</code>和这些能转换为<code>true</code>的值被称为<code>truthy</code>值。假设一个变量保存一个对象，要么其值是<code>null</code>，要么保存真正的对象，可以使用下面方式判断：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">o</span> <span style="color:#f92672">!==</span> <span style="color:#66d9ef">null</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;o is not null&#34;</span>)
</span></span><span style="display:flex;"><span>} <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;o is null&#34;</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">o</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;o is not null&#34;</span>)
</span></span><span style="display:flex;"><span>} <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;o is null&#34;</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>布尔值有一个<code>toString()</code>方法，可用于将自己转换为字符串<code>&quot;true&quot;</code>或<code>&quot;false&quot;</code>。除此之外，布尔值再没有其它有用的方法。</p>
<h2 id="null与undefined">null与undefined</h2>
<p><code>null</code>是一个关键词，用于表示某个值不存在。使用<code>typeof</code>操作符作用于<code>null</code>，将会返回字符串<code>object</code>。这表明<code>null</code>是一种特殊的对象，表示没有对象：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#66d9ef">typeof</span> <span style="color:#66d9ef">null</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 打印的值
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">object</span>
</span></span></code></pre></div><p>实际上，<code>null</code>通常被视为其自身类型的唯一成员，可以用来表示数字、字符串和对象的<code>&quot;no object&quot;</code>。大多数编程语言都有与JavaScript的<code>null</code>相对应的值，如<code>NULL、nil</code> 或<code>None</code>。</p>
<p><code>undefined</code>也表示值不存在，但它表示一种更深层次的不存在。具体地说，以下场景都是<code>undefined</code>:</p>
<ul>
<li>变量未初始化时就是<code>undefined</code>。</li>
<li>在查询对象不存在的属性或数组元素时也会得到<code>undefined</code>。</li>
<li>没有传实参的函数参数的值是<code>undefined</code>。</li>
</ul>
<p><code>undefined</code>是一个预定义的全局常量，而非像<code>null</code>那样是语言关键字。这个常量的初始化值就是<code>undefined</code>。对<code>undefined</code>应用<code>typeof</code>操作符会返回字符串<code>undefined</code>，表示这个值是该特殊类型的唯一成员。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#66d9ef">typeof</span> <span style="color:#66d9ef">undefined</span>) <span style="color:#75715e">// undefined
</span></span></span></code></pre></div><p><code>null</code>和<code>undefine</code>都可以表示某个值不存在，经常被混用。相等操作<code>==</code>认为它们相等，要区分它们必须使用全等操作符<code>===</code>。</p>
<h2 id="symbols">Symbols</h2>
<p><code>Symbols</code>是ES6引入的，<font color=red>用作非字符串属性名</font>。要了解<code>Symbols</code>，需要知道基本的<code>Object</code>类型是一个无序的属性集合，其中的每个属性都有一个名称和一个值。属性名通常是字符串，但在ES6及之后，<code>Symbols</code>也可以实现这个目的。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">strname</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;string name&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">symname</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Symbol</span>(<span style="color:#e6db74">&#34;propname&#34;</span>);
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#66d9ef">typeof</span> <span style="color:#a6e22e">strname</span>);
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#66d9ef">typeof</span> <span style="color:#a6e22e">symname</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">o</span> <span style="color:#f92672">=</span> {};
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">o</span>[<span style="color:#a6e22e">strname</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">o</span>[<span style="color:#a6e22e">symname</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>;
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">o</span>)
</span></span></code></pre></div><p><code>Symbol</code>没有字面量语法，要获取一个<code>Symbol</code>值，需要调用<code>Symbol()</code>函数。<font color=red>这个函数永远不会返回相同的值</font>，即使调用时传入相同的参数。</p>
<p>这意味着，调用<code>Symbol()</code>取得的值，可以<font color=Blue>安全地作为属性名以添加对象新的属性，无需担心覆盖原有的属性</font>。类似地，可以使用那些未被共享的符号属性名，可以确保程序中的其它代码不会意外的重写这个属性。</p>
<p>实践中，<code>Symbol</code>通常用作一种语言扩展机制。ES6新增了<code>for/of</code>循环和可迭代对象，为此需要定义一种标准的机制让类变成可迭代的。但是，如果选择任何特定的字符串作为这个迭代器方法名，都可能破坏已有的代码，因此<code>Symbol</code>应运而生。</p>
<p><code>Symbol()</code>函数可选地接受一个字符串参数，返回唯一的符号值。如果在调用的时候传递一个字符串参数，那么调用<code>Symbol</code>的<code>toString()</code>方法得到的结果中会包含该字符串。但传入两个相同的字符串，调用<code>Symbol</code>两次获取到的<code>Symbol</code>值是不同的。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">s</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Symbol</span>(<span style="color:#e6db74">&#34;sym_x&#34;</span>);
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">toString</span>())
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">s1</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Symbol</span>(<span style="color:#e6db74">&#34;sym_x&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">s1</span> <span style="color:#f92672">===</span> <span style="color:#a6e22e">s</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 打印的值
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">false</span>
</span></span></code></pre></div><p><code>toString()</code>是<code>Symbol</code>实例中唯一有趣的方法。但是，还应该了解另外两个与<code>Symbol</code>相关的函数。有时，在使用<code>Symbol</code>时希望它们是私有的，这样就可以保证自定义的属性不会与其它代码使用的属性发生冲突。</p>
<p>但有时，可能希望定义一个<code>Symbol</code>值，并与其它代码共享。如果要定义某种扩展，并希望其它代码也能使用，就会出现这种情况。</p>
<p>为了满足后一种常见，JavaScript定义了一个全局<code>Symbol</code>注册表。<code>Symbol.for()</code>函数接收一个字符串参数，返回一个与所传字符串相关联的<code>Symbol</code>值。如果该字符串尚未关联任何<code>Symbol</code>，则会创建并返回一个新的<code>Symbol</code>。否则，将返回已存在的<code>Symbol</code>。</p>
<p>也就是说，<code>Symbol.for()</code>函数与<code>Symbol()</code>函数完全不同。 <code>Symbol()</code>两次调用不会返回相同的值，<font color=red>但<code>Symbol.for()</code>在调用相同字符串时总是返回相同的值</font>。传递给 <code>Symbol.for()</code>的字符串会出现在返回符号的 <code>toString()</code>输出中，也可以调用<code>Symbol.keyFor()</code>来获取。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">s</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Symbol</span>.<span style="color:#66d9ef">for</span>(<span style="color:#e6db74">&#34;shared&#34;</span>);                             
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">t</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Symbol</span>.<span style="color:#66d9ef">for</span>(<span style="color:#e6db74">&#34;shared&#34;</span>);                             
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">s</span> <span style="color:#f92672">===</span> <span style="color:#a6e22e">t</span>, <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">toString</span>(), <span style="color:#a6e22e">Symbol</span>.<span style="color:#a6e22e">keyFor</span>(<span style="color:#a6e22e">t</span>))   
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 打印的值
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">true</span> <span style="color:#a6e22e">Symbol</span>(<span style="color:#a6e22e">shared</span>) <span style="color:#a6e22e">shared</span>
</span></span></code></pre></div><h2 id="the-global-object">The Global Object</h2>
<p>全局对象的属性是全局性定义的标识符，可以在程序的任何地方使用。JavaScript解释器启动后或每次浏览器加载新页面时，都会创建一个新的全局对象，并为这个全局对象添加一组初始的属性：</p>
<ul>
<li><code>undefied、Infinity</code>和<code>NaN</code>这样的全局常量。</li>
<li><code>isNaN()</code>，<code>parseInt()</code>和<code>eval()</code>这样的全局函数。</li>
<li><code>Date()</code>，<code>RegExp()</code>，<code>String()</code>，<code>Object()</code>和<code>Array()</code>这样的构造函数。</li>
<li><code>Math</code>和<code>JSON</code>这样的全局对象。</li>
</ul>
<p><font color=red>全局对象的初始属性不是保留字</font>，但它们应该都被当成保留字。在<code>Node</code>中，全局对象有一个属性名为<code>global</code>，表示这个全局对象本身。</p>
<p>在浏览器中，<code>Window</code>对象对浏览器窗口中所有JavaScript代码而言，充当了全局对象的角色。这个全局的<code>Window</code>对象有一个自引用的<code>window</code>属性，可以引用全局对象。</p>
<h2 id="immutable-primitive-values-and-mutable-object-references">Immutable Primitive Values and Mutable Object References</h2>
<p>JavaScript中的基本类型(<code>undefined,null,</code>布尔值,数值和字符串）和对象类型（包括数组和函数）有一个本质区别，基本类型是不可变的，对象类型是可变的。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">object</span> <span style="color:#f92672">=</span> {<span style="color:#a6e22e">x</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">12</span>}
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">object</span>.<span style="color:#a6e22e">x</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">13</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">object</span>.<span style="color:#a6e22e">y</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">14</span>
</span></span></code></pre></div><p>基本类型是按值比较的，而对象类型不是按值比较的。两个不同的对象即使拥有完全相同的属性和值，它们也不相等。两个不同的数组即使具有相同顺序的相同元素，也是不相等的。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">x</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">12</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">o</span> <span style="color:#f92672">=</span> {<span style="color:#a6e22e">x</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>}, <span style="color:#a6e22e">p</span> <span style="color:#f92672">=</span> {<span style="color:#a6e22e">x</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>};
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">o</span> <span style="color:#f92672">===</span> <span style="color:#a6e22e">p</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">a</span> <span style="color:#f92672">=</span> [], <span style="color:#a6e22e">b</span> <span style="color:#f92672">=</span> [];
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">a</span> <span style="color:#f92672">===</span> <span style="color:#a6e22e">b</span>)
</span></span></code></pre></div><p>区别于基本数据类型，对象类型也被称为引用类型。使用这种术语，对象值就是引用，对象是按引用比较的。两个对象相等当且仅当它们引用同一个底层对象：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">a</span> <span style="color:#f92672">=</span> [];
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">b</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">a</span>;
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">b</span>[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">a</span>[<span style="color:#ae81ff">0</span>] 
</span></span><span style="display:flex;"><span><span style="color:#75715e">// a和b引用同一个对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">a</span> <span style="color:#f92672">===</span> <span style="color:#a6e22e">b</span>) <span style="color:#75715e">// true
</span></span></span></code></pre></div><p>从上面这段代码中可以看出，将对象（或数组）赋值给变量只是赋值引用，并不会创建对象的新副本。如果要创建对象或数组的新副本，必须明确复制对象的属性或数组的元素：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">a</span> <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#34;a&#34;</span>, <span style="color:#e6db74">&#34;b&#34;</span>, <span style="color:#e6db74">&#34;c&#34;</span>];
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">b</span> <span style="color:#f92672">=</span> [];
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">a</span>.<span style="color:#a6e22e">length</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">b</span>[<span style="color:#a6e22e">i</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">a</span>[<span style="color:#a6e22e">i</span>];
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">c</span> <span style="color:#f92672">=</span> Array.<span style="color:#a6e22e">from</span>(<span style="color:#a6e22e">b</span>);
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">a</span>, <span style="color:#a6e22e">b</span>, <span style="color:#a6e22e">c</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">a</span> <span style="color:#f92672">===</span> <span style="color:#a6e22e">b</span>, <span style="color:#a6e22e">a</span> <span style="color:#f92672">===</span> <span style="color:#a6e22e">c</span>, <span style="color:#a6e22e">b</span> <span style="color:#f92672">===</span> <span style="color:#a6e22e">c</span>) 
</span></span><span style="display:flex;"><span><span style="color:#75715e">// false false false
</span></span></span></code></pre></div><p>类似的，如果想比较两个不同的对象或数组，必须比较它们的属性或每个元素。下面函数用于比较两个不同的数组的内容是否相等：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">equalArrays</span>(<span style="color:#a6e22e">a</span>, <span style="color:#a6e22e">b</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">a</span> <span style="color:#f92672">===</span> <span style="color:#a6e22e">b</span>) <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">a</span>.<span style="color:#a6e22e">length</span> <span style="color:#f92672">!=</span> <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">length</span>) <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">a</span>.<span style="color:#a6e22e">length</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">a</span>[<span style="color:#a6e22e">i</span>] <span style="color:#f92672">!==</span> <span style="color:#a6e22e">b</span>[<span style="color:#a6e22e">i</span>]) <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="type-conversions">Type Conversions</h2>
<p>JavaScript对所需值的类型非常灵活，这一点在上面介绍布尔值已经看到了。如果需要布尔值，而我们提供了一个其它类型的值，则这些值会自动转换为布尔值。</p>
<p>对于其它类型也是一样的，如果想要一个字符，传入的任何值都会转换成字符串。如果想要数值，会尝试把传递的值转换为一个数值，如果无法转换，就会转换为<code>NaN</code>。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#ae81ff">10</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; objects&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;7&#34;</span> <span style="color:#f92672">*</span> <span style="color:#e6db74">&#34;4&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">n</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">-</span> <span style="color:#e6db74">&#34;x&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">n</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">n</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; objects&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 打印的结果
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#ae81ff">10</span> <span style="color:#a6e22e">objects</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">28</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">NaN</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">NaN</span> <span style="color:#a6e22e">objects</span>
</span></span></code></pre></div><p>下面表格总结了 JavaScript中值如何从一种类型转换到另一种类型。下面表格中的粗体条目突出显示了可能会让我们感到意外的转换。空格表示不需要转换，也不执行转换。</p>
<img src="https://s2.loli.net/2023/10/29/8GjWVLOzS4pt2Hk.png" alt="8GjWVLOzS4pt2Hk" style="zoom:50%;" />
<h3 id="conversions-and-equality">Conversions and Equality</h3>
<p>有两种操作符测试两个值是否相等，一个是严格的操作符<code>===</code>，<font color=red>若两个值的类型不同，则它认为它们不相等</font>。因为JavaScript在类型上比较灵活，所以定义了<code>==</code>操作符，这个操作符判定相等的标准相当灵活：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">null</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">undefined</span> <span style="color:#75715e">// =&gt; true: These two values are treated as equal.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> <span style="color:#75715e">// =&gt; true: String converts to a number before comparing. 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#ae81ff">0</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">false</span> <span style="color:#75715e">// =&gt; true: Boolean converts to number before comparing. 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">false</span> <span style="color:#75715e">// =&gt; true: Both operands convert to 0 before comparing!
</span></span></span></code></pre></div><p>需要注意的是，一个值可以转换为另一种类型，但这并不意味这两个值是相等的。例如，<code>undefined</code>在需要布尔值的地方会转换为<code>false</code>，但这不意味着<code>undefined == false</code>。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#66d9ef">false</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">undefined</span>) <span style="color:#75715e">// false
</span></span></span></code></pre></div><p>操作符和语句期待不同的类型，因此会执行以这些目标类型的转换，但<code>==</code>操作符不会尝试将操作数转换为布尔类型。</p>
<h3 id="explicit-conversions">Explicit Conversions</h3>
<p>虽然会执行很多类型自动转换，但有时需要进行显式类型转换，以保证代码清晰。显式类型转最简单的方法是使用<code>Boolean(), Number(), and String()</code>函数。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(Number(<span style="color:#e6db74">&#34;3&#34;</span>), String(<span style="color:#66d9ef">false</span>), Boolean([])) <span style="color:#75715e">// 3 false true
</span></span></span></code></pre></div><p>除了<code>null</code>和<code>undefined</code>，任何其它值都有<code>toString()</code>，并且调用<code>toString</code>方法的返回值和直接调用<code>String()</code>函数的结果一样。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#66d9ef">null</span>.<span style="color:#a6e22e">toString</span>())
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Uncaught TypeError: Cannot read properties of null (reading &#39;toString&#39;)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#66d9ef">undefined</span>.<span style="color:#a6e22e">toString</span>())
</span></span><span style="display:flex;"><span><span style="color:#75715e">//Uncaught TypeError: Cannot read properties of undefined (reading &#39;toString&#39;)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(String(<span style="color:#66d9ef">null</span>), String(<span style="color:#66d9ef">undefined</span>)) <span style="color:#75715e">// null undefined
</span></span></span></code></pre></div><p>某些操作符会进行隐式类型转换。如二元操作符<code>+</code>的一个操作数是字符串，则会将另一个操作数转换为字符串。一元操作符会把自己的操作数转换为数值。一元操作符<code>!</code>会先把它的操作数转换为布尔类型，然后再取反。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">x</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;&#34;</span> <span style="color:#75715e">// =&gt; String(x)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">+</span><span style="color:#a6e22e">x</span>   <span style="color:#75715e">// =&gt; Number(x)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">x</span><span style="color:#f92672">-</span><span style="color:#ae81ff">0</span>  <span style="color:#75715e">// =&gt; Number(x)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">!!</span><span style="color:#a6e22e">x</span>  <span style="color:#75715e">// =&gt; Boolean(x): Note double !
</span></span></span></code></pre></div><p><code>Number</code>类定义的<code>toString()</code>方法<font color=LightSeaGreen>接受一个可选参数，以指定基数或底数</font>。如果没有特殊指定这个参数，则默认基数是10:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">n</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">17</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">binary</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;0b&#34;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">toString</span>(<span style="color:#ae81ff">2</span>); 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">octal</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;0o&#34;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">toString</span>(<span style="color:#ae81ff">8</span>); 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">hex</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;0x&#34;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">n</span>.<span style="color:#a6e22e">toString</span>(<span style="color:#ae81ff">16</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">n</span>, <span style="color:#a6e22e">binary</span>, <span style="color:#a6e22e">octal</span>, <span style="color:#a6e22e">hex</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 打印的结果
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#ae81ff">17</span> <span style="color:#ae81ff">0b10001</span> <span style="color:#ae81ff">0o21</span> <span style="color:#ae81ff">0x11</span>
</span></span></code></pre></div><p>如果把字符串传给<code>Number()</code>函数，它会尝试把字符串转换为整数或浮点字面量。但是，这个函数只能处理以10为基数，且末尾不能有无关字符。</p>
<p>但全局的函数<code>parseInt()</code>和<code>parseFloat()</code>更灵活。若整数以<code>0x</code>或<code>0X</code>开头，<code>parseInt()</code>会将其解析为十六进制，并且<code>parseInt()</code>和<code>parseFloat()</code>都会跳过开头的空格，尽量多地解析数字字符，忽略后面的无关字符。如果第一个非空字符不是有效的数值字面量，将会返回<code>NaN</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>parseInt(<span style="color:#e6db74">&#34;3 blind mice&#34;</span>) <span style="color:#75715e">// 3
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>parseFloat(<span style="color:#e6db74">&#34; 3.14 meters&#34;</span>) <span style="color:#75715e">// 3.14
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>parseInt(<span style="color:#e6db74">&#34;-12.34&#34;</span>)
</span></span><span style="display:flex;"><span>parseInt(<span style="color:#e6db74">&#34;0xFF&#34;</span>)
</span></span><span style="display:flex;"><span>parseInt(<span style="color:#e6db74">&#34;0xff&#34;</span>)
</span></span><span style="display:flex;"><span>parseInt(<span style="color:#e6db74">&#34;-0XFF&#34;</span>)
</span></span><span style="display:flex;"><span>parseFloat(<span style="color:#e6db74">&#34;.1&#34;</span>)
</span></span><span style="display:flex;"><span>parseInt(<span style="color:#e6db74">&#34;0.1&#34;</span>)
</span></span><span style="display:flex;"><span>parseInt(<span style="color:#e6db74">&#34;.1&#34;</span>)
</span></span><span style="display:flex;"><span>parseFloat(<span style="color:#e6db74">&#34;$72.47&#34;</span>) <span style="color:#75715e">// NaN
</span></span></span></code></pre></div><p><code>parseInt()</code>接收可选的第二个参数，用于指定数值的基数，合法的值是2到36:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>parseInt(<span style="color:#e6db74">&#34;11&#34;</span>, <span style="color:#ae81ff">23</span>)
</span></span><span style="display:flex;"><span>parseInt(<span style="color:#e6db74">&#34;ff&#34;</span>, <span style="color:#ae81ff">16</span>)
</span></span><span style="display:flex;"><span>parseInt(<span style="color:#e6db74">&#34;zz&#34;</span>, <span style="color:#ae81ff">36</span>)
</span></span><span style="display:flex;"><span>parseInt(<span style="color:#e6db74">&#34;077&#34;</span>, <span style="color:#ae81ff">8</span>)
</span></span><span style="display:flex;"><span>parseInt(<span style="color:#e6db74">&#34;077&#34;</span>, <span style="color:#ae81ff">10</span>)
</span></span></code></pre></div><h3 id="object-to-primitive-conversions">Object to Primitive Conversions</h3>
<h2 id="variable-declaration-and-assignment">Variable Declaration and Assignment</h2>
<p>在使用变量和常量之前，都必须先声明它。在ES6之后，使用<code>let</code>和<code>const</code>关键字声明，在ES6之前使用<code>var</code>声明，并且<code>var</code>更特殊一些。</p>
<h3 id="declarations-with-let-and-const">Declarations with let and const</h3>
<p>如果使用<code>let</code>声明变量时，未初始化值，则在变量被初始化之前，它的值为<code>undefined</code>：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">i</span>; 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">sum</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">sum</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">message</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;hello&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">j</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">k</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">x</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>, <span style="color:#a6e22e">y</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">x</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">x</span>; <span style="color:#75715e">// Initializers can use previously declared variables
</span></span></span></code></pre></div><p>要声明常量而非变量时，需要使用<code>const</code>关键词。使用<code>const</code>声明常量时必须同时初始化。常量的值不能被改变，如果尝试重新赋值，则会抛出<code>TypeError</code>。声明常量的一个常见约定是全部字母大写。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">H0</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">74</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">C</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">299792.458</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">AU</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">1.496</span><span style="color:#a6e22e">E8</span>;
</span></span></code></pre></div><p>在同一个作用域内使用多个<code>let</code>或<code>const</code>声明同一个名字是语法错误。在嵌套作用域内声明同名的变量是合法的，但不推荐这样做。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">x</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">x</span> <span style="color:#f92672">===</span> <span style="color:#ae81ff">1</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">x</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">x</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">x</span>)
</span></span></code></pre></div><h3 id="variable-declarations-with-var">Variable Declarations with var</h3>
<p>在ES6之前，声明变量的唯一方式是使用<code>var</code>关键词，并且不允许声明常量。使用<code>var</code>声明变量的语法和使用<code>let</code>关键词一样：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">x</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">data</span> <span style="color:#f92672">=</span> [], <span style="color:#a6e22e">count</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">length</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">count</span>, <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">data</span>[<span style="color:#a6e22e">i</span>])
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>虽然var和let有相同的语法，但它们也有重要的区别：</p>
<ul>
<li>使用<code>var</code>声明的变量不具有块作用域。这种变量的作用域仅限于包含变量声明的函数体，无论它在函数中嵌套层次有多深。</li>
<li>如果在函数外部使用<code>var</code>声明变量，则会声明一个全局变量。但与<code>let</code>声明的全局变量有一个重要区别，<code>var</code>声明的全局变量被实现为全局对象的属性，全局对象可以使用<code>globalThis</code>引用。</li>
<li>使用<code>var</code>多次声明同名变量是合法的。因为var具有函数作用域，而非块作用域，所以经常会出现声明同名变量的情况。</li>
<li>使用<code>var</code>声明变量，该变量会被提升到函数的顶部，但<font color=LightSeaGreen>变量的初始化仍然在代码所在位置</font>。</li>
</ul>
<p>在严格模式下，如果试图使用未声明的变量，运行代码时会出现引用错误。然而，在严格模式之外，如果为一个未使用<code>let、const</code>或<code>var</code>声明的名称赋值，最终会创建一个新的全局变量。无论引用的代码嵌套在函数和代码块中多深，它都将是一个全局变量，这几乎肯定不是我们想要的，而且容易出错，也是使用严格模式的最佳原因之一。</p>
<h3 id="destructuring-assignment">Destructuring Assignment</h3>
<p>ES6实现了一种复合声明与赋值语法，叫做解构赋值。在解构赋值中，等号右边是一个数组或对象，等号左边以模拟或数组和对象的方式指定一个或多个变量名字。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> [<span style="color:#a6e22e">x</span>, <span style="color:#a6e22e">y</span>] <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>];
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">x</span>, <span style="color:#a6e22e">y</span>] <span style="color:#f92672">=</span> [<span style="color:#a6e22e">x</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>, <span style="color:#a6e22e">y</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>];
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">x</span>, <span style="color:#a6e22e">y</span>] <span style="color:#f92672">=</span> [<span style="color:#a6e22e">y</span>, <span style="color:#a6e22e">x</span>];
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">x</span>, <span style="color:#a6e22e">y</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 打印的值
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#ae81ff">3</span> <span style="color:#ae81ff">2</span>
</span></span></code></pre></div><p>解构赋值可以让返回数组的函数变得异常便捷：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">toPolar</span>(<span style="color:#a6e22e">x</span>, <span style="color:#a6e22e">y</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> [Math.<span style="color:#a6e22e">sqrt</span>(<span style="color:#a6e22e">x</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">x</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">y</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">y</span>), Math.<span style="color:#a6e22e">atan2</span>(<span style="color:#a6e22e">y</span>, <span style="color:#a6e22e">x</span>)];
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">toCartesian</span>(<span style="color:#a6e22e">r</span>, <span style="color:#a6e22e">theta</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> [<span style="color:#a6e22e">r</span> <span style="color:#f92672">*</span> Math.<span style="color:#a6e22e">cos</span>(<span style="color:#a6e22e">theta</span>), <span style="color:#a6e22e">r</span> <span style="color:#f92672">*</span> Math.<span style="color:#a6e22e">sin</span>(<span style="color:#a6e22e">theta</span>)];
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> [<span style="color:#a6e22e">r</span>,<span style="color:#a6e22e">theta</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">toPolar</span>(<span style="color:#ae81ff">1.0</span>, <span style="color:#ae81ff">1.0</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> [<span style="color:#a6e22e">x</span>,<span style="color:#a6e22e">y</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">toCartesian</span>(<span style="color:#a6e22e">r</span>,<span style="color:#a6e22e">theta</span>);
</span></span></code></pre></div><p>在循环中也可以使用解构赋值：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">o</span> <span style="color:#f92672">=</span> {<span style="color:#a6e22e">x</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>, <span style="color:#a6e22e">y</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">2</span>}; <span style="color:#75715e">// The object we&#39;ll loop over
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">const</span> [<span style="color:#a6e22e">name</span>, <span style="color:#a6e22e">value</span>] <span style="color:#66d9ef">of</span> Object.<span style="color:#a6e22e">entries</span>(<span style="color:#a6e22e">o</span>)) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">name</span>, <span style="color:#a6e22e">value</span>); 
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>解构赋值时，等号左边的变量数量不必与等号右边的数组元素个数匹配，左边多余的变量的初始值为<code>undefined</code>，右边多余的值会被忽略。左边变量列表可以包含额外的逗号，用于跳过右侧的某些值：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> [<span style="color:#a6e22e">x</span>, <span style="color:#a6e22e">y</span>] <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>];
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">x</span>, <span style="color:#a6e22e">y</span>] <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>];
</span></span><span style="display:flex;"><span>[, <span style="color:#a6e22e">x</span>, , <span style="color:#a6e22e">y</span>] <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>];
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">x</span>, <span style="color:#a6e22e">y</span>) <span style="color:#75715e">// 2 4
</span></span></span></code></pre></div><p>在解构赋值时，如果想把所有未使用或剩余的值收集到一个变量中，可以在左侧最后一个变量名前加上3个点：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> [<span style="color:#a6e22e">x</span>, ...<span style="color:#a6e22e">y</span>] <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>];
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">x</span>, <span style="color:#a6e22e">y</span>)
</span></span></code></pre></div><p>解构赋值可以用于嵌套数组，此时左边也应该看起来像一个内嵌的数组字面量：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> [<span style="color:#a6e22e">a</span>, [<span style="color:#a6e22e">b</span>, <span style="color:#a6e22e">c</span>]] <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>, [<span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">2.5</span>], <span style="color:#ae81ff">3</span>]; <span style="color:#75715e">// a == 1; b == 2; c == 2.5
</span></span></span></code></pre></div><p>数组解构的一个重要特性是等号右侧并不要求是数组。实际上，右侧可以使用任何可迭代对象，任何可以在<code>for/of</code>循环中使用的对象都可被解构：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> [<span style="color:#a6e22e">first</span>, ...<span style="color:#a6e22e">rest</span>] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Hello&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">first</span>, <span style="color:#a6e22e">rest</span>) <span style="color:#75715e">// first == &#34;H&#34;; rest == [&#34;e&#34;,&#34;l&#34;,&#34;l&#34;,&#34;o&#34;]
</span></span></span></code></pre></div><p>解构赋值在右侧是对象值的情况下也可以执行。此时，左侧看起来像是一个对象字面量，即一个包含在花括号内以逗号分隔的变量名列表：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">transparent</span> <span style="color:#f92672">=</span> {<span style="color:#a6e22e">r</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0.0</span>, <span style="color:#a6e22e">g</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0.0</span>, <span style="color:#a6e22e">b</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0.0</span>, <span style="color:#a6e22e">a</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1.0</span>}; 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> {<span style="color:#a6e22e">r</span>, <span style="color:#a6e22e">g</span>, <span style="color:#a6e22e">b</span>} <span style="color:#f92672">=</span> <span style="color:#a6e22e">transparent</span>; <span style="color:#75715e">// r == 0.0; g == 0.0; b == 0.0
</span></span></span></code></pre></div><p>下面示例展示了把Math对象的全局函数复制给变量，这种方式可以简化代码：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#75715e">// Same as const sin=Math.sin, cos=Math.cos, tan=Math.tan
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> {<span style="color:#a6e22e">sin</span>, <span style="color:#a6e22e">cos</span>, <span style="color:#a6e22e">tan</span>} <span style="color:#f92672">=</span> Math;
</span></span></code></pre></div><p>如果等号左侧不是Math对象的属性名，则该变量的值为<code>undefined</code>。在上面解构中，我们选择了和要解构对象的属性一致的变量名，但这不是必须的：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#75715e">// Same as const cosine = Math.cos, tangent = Math.tan;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> {<span style="color:#a6e22e">cos</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">cosine</span>, <span style="color:#a6e22e">tan</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">tangent</span>} <span style="color:#f92672">=</span> Math;
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">cosine</span>(<span style="color:#ae81ff">12</span>))
</span></span></code></pre></div><h1 id="chapter-4">Chapter 4</h1>
<p>表达式是一个可以被求值并产生一个值的短语，嵌入到程序中的常量是最简单的表达式，变量名也是简单的表达式，并求值为赋给该变量的值。</p>
<p>复杂的表达式由简单的表达式组成，例如一个数组访问表达式由一个求值为数组的表达式、一个左方括号，一个求值为整数的表达式和一个右方括号构成。</p>
<h2 id="primary-expressions">Primary Expressions</h2>
<p>最简单的表示式被称为基础表达式，是指那些独立存在，不再包含更简单表达式的表达式。基础表达式包含常量，字面量，某些关键字和变量引用。</p>
<ul>
<li>
<p>字面量是可以直接嵌入到程序中的常量值。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#ae81ff">1.23</span> <span style="color:#75715e">// A number literal
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#e6db74">&#34;hello&#34;</span> <span style="color:#75715e">// A string literal
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#e6db74">/pattern/</span>  <span style="color:#75715e">// A regular expression literal
</span></span></span></code></pre></div></li>
<li>
<p>保留字也是基础表达式。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">null</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">this</span>
</span></span></code></pre></div></li>
<li>
<p>常量，变量或全局对象属性的引用。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">i</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">sum</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">undefined</span>
</span></span></code></pre></div><p>当程序中出现任何标识符时，都被假设为常量或变量或全局对象的属性，并查询它的值。如果不存在该名字的变量，则会抛出<code>ReferenceError</code>。</p>
</li>
</ul>
<h2 id="object-and-array-initializers">Object and Array Initializers</h2>
<p>对象和数组初始化器也是表达式，它的值为新创建的对象或数组。这些初始化表达式也被称为对象字面量或数组字面量。与真正的字面量不同的是，它们不是基础表达式。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>[] <span style="color:#75715e">// An empty array: no expressions inside brackets means no elements
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>[<span style="color:#ae81ff">1</span><span style="color:#f92672">+</span><span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span><span style="color:#f92672">+</span><span style="color:#ae81ff">4</span>] <span style="color:#75715e">// A 2-element array. First element is 3, second is 7
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">matrix</span> <span style="color:#f92672">=</span> [[<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>], [<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">5</span>,<span style="color:#ae81ff">6</span>], [<span style="color:#ae81ff">7</span>,<span style="color:#ae81ff">8</span>,<span style="color:#ae81ff">9</span>]];
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">sparseArray</span> <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>,,,,<span style="color:#ae81ff">5</span>];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">p</span> <span style="color:#f92672">=</span> { <span style="color:#a6e22e">x</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">2.3</span>, <span style="color:#a6e22e">y</span><span style="color:#f92672">:</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1.2</span> } <span style="color:#75715e">// An object with 2 properties
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">q</span> <span style="color:#f92672">=</span> {}; <span style="color:#75715e">// An empty object with no properties
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">q</span>.<span style="color:#a6e22e">x</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">2.3</span>; <span style="color:#a6e22e">q</span>.<span style="color:#a6e22e">y</span> <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1.2</span>; <span style="color:#75715e">// Now q has the same properties as p
</span></span></span></code></pre></div><p>在ES6中，对象字面量有更丰富的语法，可以嵌套。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">rectangle</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">upperLeft</span><span style="color:#f92672">:</span> {<span style="color:#a6e22e">x</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">2</span>, <span style="color:#a6e22e">y</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">2</span>},
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">lowerRight</span><span style="color:#f92672">:</span> {<span style="color:#a6e22e">x</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">4</span>, <span style="color:#a6e22e">y</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">5</span>}
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><h2 id="property-access-expressions">Property Access Expressions</h2>
<p>属性访问表达式求值对象属性或数组的元素，有两种属性访问语法。第一种是使用点操作符，另一种是使用方括号，示例如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">o</span> <span style="color:#f92672">=</span> {<span style="color:#a6e22e">x</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>, <span style="color:#a6e22e">y</span><span style="color:#f92672">:</span> {<span style="color:#a6e22e">z</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">3</span>}};
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">a</span> <span style="color:#f92672">=</span> [<span style="color:#a6e22e">o</span>, <span style="color:#ae81ff">4</span>, [<span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">6</span>]];
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">o</span>.<span style="color:#a6e22e">x</span>, <span style="color:#a6e22e">o</span>.<span style="color:#a6e22e">y</span>.<span style="color:#a6e22e">z</span>, <span style="color:#a6e22e">o</span>[<span style="color:#e6db74">&#34;x&#34;</span>], <span style="color:#a6e22e">a</span>[<span style="color:#ae81ff">1</span>], <span style="color:#a6e22e">a</span>[<span style="color:#ae81ff">2</span>][<span style="color:#e6db74">&#34;1&#34;</span>])
</span></span></code></pre></div><p>无论使用哪种属性访问表达式，位于<code>.</code>或<code>[</code>前的表达式都会被求值，如果值为null或undefined，表达式就会抛出TypeError，因为null或undefined是不能有属性的两个值。</p>
<h2 id="operator-overview">Operator Overview</h2>
<p>多数操作符都以<code>+</code>和<code>=</code>这样的标点表示，有一些以<code>delete</code>和<code>instanceof</code>这样的关键字表示。关键字操作符也是常规操作符，只不过它们的语法没有那么简短而已。</p>
<p>尽管<code>typeof</code>是最高优先级的操作符，但<code>typeof</code>操作符要基于属性访问，数组索引以及函数调用，这些操作的优先级全部高于操作符。</p>
<p><code>+</code>操作符优先字符串拼接，只要操作数是字符串或可以转换为字符串的对象，另一个操作数也会被转换为字符串并执行拼接操作。只有任何操作数都不是字符串或<code>string-like</code>才会执行加法操作。</p>
<p><code>eval()</code>期待一个参数，如果传入的是非字符串参数，它会简单地返回这个值。如果传入字符串，它会尝试把这个字符串当作JavaScript字符串来解析，解析失败会抛出<code>SyntaxError</code>，如果解析成功，它会求值代码<font color=red>并返回该字符串中最后一个表达式或语句的值</font>，如果最后一个表达式或语句没有值则返回<code>undefined</code>。</p>
<p>先定义操作符<code>??</code>求值其先定义的操作数，如果左边的操作数不是<code>null</code>或<code>undefined</code>，就返回该值。否则，它会返回右操作数的值。</p>
<p>typeof是一个元操作符，放在自己的操作数前面，这个操作数可以是任意类型。typeof操作符的值是一个字符串，表明操作数的类型。</p>
<img src="https://s2.loli.net/2023/11/05/yujMxhp8W96eBKS.png" alt="yujMxhp8W96eBKS" style="zoom:50%;" />
<p>需要注意的是，如果操作数的值是<code>null</code>，<code>typeof</code>返回字符串<code>object</code>。如果想区分<code>null</code>和对象，必须显式测试这个特殊值。</p>
<p><code>delete</code>是一元操作符，它尝试删除其操作数指定的对象属性或数组元素。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">o</span> <span style="color:#f92672">=</span> {<span style="color:#a6e22e">x</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>, <span style="color:#a6e22e">y</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">2</span>}; <span style="color:#75715e">// Start with an object 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">delete</span> <span style="color:#a6e22e">o</span>.<span style="color:#a6e22e">x</span>; <span style="color:#75715e">// Delete one of its properties 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#e6db74">&#34;x&#34;</span> <span style="color:#66d9ef">in</span> <span style="color:#a6e22e">o</span> <span style="color:#75715e">// =&gt; false: the property does not exist anymore
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">a</span> <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>]; <span style="color:#75715e">// Start with an array
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">delete</span> <span style="color:#a6e22e">a</span>[<span style="color:#ae81ff">2</span>]; <span style="color:#75715e">// Delete the last element of the array 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#ae81ff">2</span> <span style="color:#66d9ef">in</span> <span style="color:#a6e22e">a</span> <span style="color:#75715e">// =&gt; false: array element 2 doesn&#39;t exist anymore
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">a</span>.<span style="color:#a6e22e">length</span> <span style="color:#75715e">// =&gt; 3: note that array length doesn&#39;t change, though
</span></span></span></code></pre></div><p>被删除的属性和数组元素会被设置为<code>undefined</code>。尝试读取删除的属性或数组元素时，会返回<code>undefined</code>值，通过<code>in</code>操作符可以测试某个属性是否存在。<font color=red>删除某个数组元素会在数组中留下一个坑，并不会改变数组长度</font>。</p>
<h1 id="chapter-5">Chapter 5</h1>
<p>JavaScript表达式称为短语，JavaScript语句就是句子或命令，使用分号结尾。与逗号操作符将多个表达式组合成一个表达式一样，语句将多个语句组合成一个复合语句。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">x</span> <span style="color:#f92672">=</span> Math.<span style="color:#a6e22e">PI</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">cx</span> <span style="color:#f92672">=</span> Math.<span style="color:#a6e22e">cos</span>(<span style="color:#a6e22e">x</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;cos(π) = &#34;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">cx</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>JavaScript解释器在执行空语句什么也不会做。空语句偶尔会有用，比如创建一个空循环体：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">a</span>.<span style="color:#a6e22e">length</span>; <span style="color:#a6e22e">a</span>[<span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>) ;
</span></span></code></pre></div><p>在这个循环中，所有的工作都由表达式a[i++] = 0完成，因此不需要循环体。然而，JavaScript语法要求使用语句作为循环体，因此使用了一个空语句，即一个空的分号。</p>
<p>switch语句首先对跟在switch关键字后面的表达式求值，然后按照顺序求值case表达式，直到遇到匹配的值。这里的匹配使用<code>===</code>全等操作符，而不是<code>==</code>相等操作符，因此表达式必须在没有类型转换的情况下匹配。</p>
<p>对for循环而言，3个表达式中的任何一个都可以省略，只有两个分号是必需的。</p>
<p>ES6定义了一个新循环语句for/of，这种新循环虽然使用了for关键字，但它与常规for是完全不同的两种循环。for/of循环专门用于可迭代对象，数组，字符串，集合和映射都是可迭代对象。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">data</span> <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">6</span>, <span style="color:#ae81ff">7</span>, <span style="color:#ae81ff">8</span>, <span style="color:#ae81ff">9</span>], <span style="color:#a6e22e">sum</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">element</span> <span style="color:#66d9ef">of</span> <span style="color:#a6e22e">data</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">sum</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">element</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">sum</span>)
</span></span></code></pre></div><p>在上面的代码中，循环体对应data数组中的每个元素都会运行一次。在每次执行循环体之前，都会把数组的下一个元素赋值给元素变量。数组元素是按照从头到尾的顺序迭代的。</p>
<p>对象默认是不可迭代的，运行时尝试对常规对象使用for/of会抛出TypeError。字符串是按照Unicode码点，而不是UTF-16字符迭代的。字符串<code>I😀😁</code>的长度为5，但使用for/of只会迭代3次：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">test</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;I😀😁&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">item</span> <span style="color:#66d9ef">of</span> <span style="color:#a6e22e">test</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">item</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>ES6内置的Set和Map类都是可迭代的：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">text</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Na na na na na na na na Batman!&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">wordSet</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Set</span>(<span style="color:#a6e22e">text</span>.<span style="color:#a6e22e">split</span>(<span style="color:#e6db74">&#34; &#34;</span>));
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">unique</span> <span style="color:#f92672">=</span> [];
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">word</span> <span style="color:#66d9ef">of</span> <span style="color:#a6e22e">wordSet</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">unique</span>.<span style="color:#a6e22e">push</span>(<span style="color:#a6e22e">word</span>);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">unique</span>) <span style="color:#75715e">// [&#34;Na&#34;, &#34;na&#34;, &#34;Batman!&#34;]
</span></span></span></code></pre></div><p>Map对象的迭代器并不迭代键或值，而是迭代键值对。每次迭代，迭代器都会返回一个数组，第一个元素是键，第二个元素是值。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">m</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Map</span>([[<span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#34;one&#34;</span>]]);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> [<span style="color:#a6e22e">key</span>, <span style="color:#a6e22e">value</span>] <span style="color:#66d9ef">of</span> <span style="color:#a6e22e">m</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">key</span>, <span style="color:#a6e22e">value</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><code>for/in</code>循环的<code>in</code>后面可以是任意对象，<code>for/of</code>循环是<code>ES6</code>新增的，而<code>for/in</code>是一开始就有的。</p>
<h1 id="chapter-6">Chapter 6</h1>
<p>对象是一个属性的无序集合，每个属性都有名字和值。属性名可以通常是字符串，也可以是符号。因此，可以说对象把字符串映射为值。这种字符串映射为值有很多种叫法，散列，字典或关联数组。但是，对象不仅仅是简单的字符串到值的映射。</p>
<p>除了维持自己属性之外，对象也可以从其他对象继承属性，这个其他对象称为其原型。对象的方法通常继承自属性，这种原型继承也是JavaScript的关键特性。</p>
<p>JavaScript的对象是动态的，属性通常可以添加或删除。属性有一个名字和值，属性名可是任意字符串，包括空字符串或任意符号，但对象不能包含两个同名的属性。</p>
<h2 id="creating-objects">Creating Objects</h2>
<p>对象可以通过对象字面量，new关键字和Object.create()函数来创建。创建对象最简单的方式是在代码中直接包含对象字面量。属性名是标识符或字符串字面量（允许空字符串），属性值是任何JavaScript表达式。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">empty</span> <span style="color:#f92672">=</span> {};
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">point</span> <span style="color:#f92672">=</span> {<span style="color:#a6e22e">x</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">y</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>};
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">p2</span> <span style="color:#f92672">=</span> {<span style="color:#a6e22e">x</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">point</span>.<span style="color:#a6e22e">x</span>, <span style="color:#a6e22e">y</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">point</span>.<span style="color:#a6e22e">y</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>};
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">book</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;main title&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;JavaScript&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;sub-title&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;The Definitive Guide&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;all audiences&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">author</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">firstname</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;David&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">surname</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Flanagan&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>对象字面量最后一个属性后面的逗号是合法的，有些编程风格指南鼓励添加这些逗号，这样以后在对象字面量的末尾添加新属性时，就不容易出现语法错误。</p>
<p>对象字面量是一个表达式，每次求值时会创建和初始化一个不同的对象。这意味着，同一个对象字面量如果出现在循环中或出现在被重复调用的函数中时，可以创建很多新对象。</p>
<h3 id="creating-objects-with-new">Creating Objects with new</h3>
<p>new操作符可以创建和初始化一个新对象。new关键字必须紧跟一个函数调用，这个函数被称为构造函数。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">o</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Object();
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">a</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Array();
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">d</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Date();
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">r</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Map</span>();
</span></span></code></pre></div><h3 id="prototypes">Prototypes</h3>
<p>几乎每个对象都有另一个与之关联的对象，这个关联的对象被称为原型。通过字面量创建的对象都有同一个原型对象，可以使用Object.prototype来引用。</p>
<p>使用new关键字和构造函数创建的对象，使用构造函数protorypes属性的值作为它们的原型。也就是说，使用<code>new Object()</code>创建的对象继承自<code>Object.prototype</code>，与通过<code>{}</code>创建的对象一样。</p>
<p>类似地，通过<code>new Array()</code>创建的对象以Array.prototype为原型，通过new Date()创建的对象以Date.prototype为原型。</p>
<p>几乎所有对象都有原型，但只有少数对象有prototype属性，正是这些有prototype属性的对象为其他对象定义了原型。</p>
<h3 id="objectcreate">Object.create()</h3>
<p>Object.create()用于创建一个新对象，使用其第一个参数作为新对象的原型。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">o1</span> <span style="color:#f92672">=</span> Object.<span style="color:#a6e22e">create</span>({<span style="color:#a6e22e">x</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>, <span style="color:#a6e22e">y</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">2</span>});
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">o1</span>.<span style="color:#a6e22e">x</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">o1</span>.<span style="color:#a6e22e">y</span>)
</span></span></code></pre></div><p>传入null可以创建一个没有原型的对象，不过这样创建的新对象不会基础任何东西，连toString()这样的基本方法都没有。</p>
<p>如果想创建一个普通的空对象(类似于<code>{}</code>或<code>new Object()</code>返回的对象)，传入Object.prototype</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">o3</span> <span style="color:#f92672">=</span> Object.<span style="color:#a6e22e">create</span>(Object.<span style="color:#a6e22e">prototype</span>); <span style="color:#75715e">// o3 is like {} or new Object().
</span></span></span></code></pre></div>
    </div>
    <footer class="post-footer">
        
 
<div class="post-tags">     
     
    <a href="https://iihui.github.io/tags/js" rel="tag" title="js">#js#</a>
    
</div>



        <div class="post-nav">
    <div class="post-nav-next post-nav-item">
    
        <a href="https://iihui.github.io/post/js-this/" rel="next" title="javascript中this指针">
        <i class="fa fa-chevron-left"></i> javascript中this指针
        </a>
    
    </div>

    <div class="post-nav-prev post-nav-item">
    
        <a href="https://iihui.github.io/post/ios-kvo/" rel="prev" title="KVO 介绍">
        KVO 介绍 <i class="fa fa-chevron-right"></i>
        </a>
    
    </div>
</div>
      
        <div class="post-nav">
    <div style="border: 1px dashed #e0e0e0; padding: 10px 10px 10px 10px; background-color: #fffeee; background-repeat: no-repeat; background-attachment: scroll; background-position: 1% 50%; -moz-background-size: auto auto; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;">
        <div style="float:left;margin-top:0px;">
            <img src="https://i.loli.net/2020/02/09/SvhUdz4XJsOr9Vk.jpg" width="128px" height="128px"/>
            <div style="text-align:center;">谢谢支持!</div>
        </div>
        <div>
            <p style="margin-top:10px;">
                标题：selection 对象
                <br />作者：阿呆<a target="_blank" href="https://iihui.github.io/"></a>
                
                <br />地址：https://iihui.github.io/post/js-selection/
                <br />声明：自由转载-非商用-保持署名（创作共享4.0许可证）
            </p>
        </div>
    </div>
    <div class="clear"></div>
</div>
        
        
        




    </footer>
  </article>
</section>

          </div>
        </div>
        <div class="sidebar-toggle">
  <div class="sidebar-toggle-line-wrap">
    <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
    <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
    <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
  </div>
</div>
<aside id="sidebar" class="sidebar">
  <div class="sidebar-inner">

  <ul class="sidebar-nav motion-element">
    <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
      文章目录
    </li>
    <li class="sidebar-nav-overview" data-target="site-overview">
      站点概览
    </li>
  </ul>

    <section class="site-overview sidebar-panel ">
      <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image"
        src="https://i.loli.net/2020/02/07/dVFzrvZkHRNq2lL.jpg"
        alt="" />
    <p class="site-author-name" itemprop="name"></p>
    <p class="site-description motion-element" itemprop="description"> 
        coder &amp; cook</p>
</div>
      <nav class="site-state motion-element">
    <div class="site-state-item site-state-posts">
      <a href="https://iihui.github.io/post/">
        <span class="site-state-item-count">140</span>
        <span class="site-state-item-name">日志</span>
      </a>
    </div>
    <div class="site-state-item site-state-categories">    
        <a href="https://iihui.github.io/categories/">      
         
        <span class="site-state-item-count">18</span>
        
        <span class="site-state-item-name">分类</span>
        
        </a>
    </div>

    <div class="site-state-item site-state-tags">
        <a href="https://iihui.github.io/tags/">
         
        <span class="site-state-item-count">29</span>
        
        <span class="site-state-item-name">标签</span>
        </a>
    </div>
</nav>
      
      
<div class="links-of-author motion-element">
    
        <span class="links-of-author-item">
        <a href="https://coolshell.cn" target="_blank" title="皓 大">
            <i class="fa fa-fw fa-globe"></i>
            皓 大
        </a>
        </span>
    
        <span class="links-of-author-item">
        <a href="http://www.ruanyifeng.com" target="_blank" title="阮 大">
            <i class="fa fa-fw fa-globe"></i>
            阮 大
        </a>
        </span>
    
        <span class="links-of-author-item">
        <a href="https://juejin.im/" target="_blank" title="掘 金">
            <i class="fa fa-fw fa-globe"></i>
            掘 金
        </a>
        </span>
    
</div>


      

      <div class="links-of-blogroll motion-element inline">
<script type="text/javascript" src="//rf.revolvermaps.com/0/0/8.js?i=&amp;m=0&amp;s=220&amp;c=ff0000&amp;cr1=ffffff&amp;f=arial&amp;l=33&amp;bv=35" async="async"></script>
</div>

    </section>
    
<section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
    <div class="post-toc">
        <div class="post-toc-content"><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#selection">selection</a></li>
        <li><a href="#range对象">range对象</a></li>
        <li><a href="#range常用方法">range常用方法</a></li>
      </ul>
    </li>
    <li><a href="#chapter-1">Chapter 1</a></li>
    <li><a href="#chapter-2">Chapter 2</a></li>
    <li><a href="#chapter-3">Chapter 3</a>
      <ul>
        <li><a href="#number">Number</a>
          <ul>
            <li><a href="#binary-floating-point-and-rounding-errors">Binary Floating-Point and Rounding Errors</a></li>
            <li><a href="#arbitrary-precision-integers-with-bigint">Arbitrary Precision Integers with BigInt</a></li>
          </ul>
        </li>
        <li><a href="#text">Text</a>
          <ul>
            <li><a href="#string-literals">String Literals</a></li>
            <li><a href="#template-literals">Template Literals</a></li>
            <li><a href="#pattern-matching">Pattern Matching</a></li>
          </ul>
        </li>
        <li><a href="#boolean-values">Boolean Values</a></li>
        <li><a href="#null与undefined">null与undefined</a></li>
        <li><a href="#symbols">Symbols</a></li>
        <li><a href="#the-global-object">The Global Object</a></li>
        <li><a href="#immutable-primitive-values-and-mutable-object-references">Immutable Primitive Values and Mutable Object References</a></li>
        <li><a href="#type-conversions">Type Conversions</a>
          <ul>
            <li><a href="#conversions-and-equality">Conversions and Equality</a></li>
            <li><a href="#explicit-conversions">Explicit Conversions</a></li>
            <li><a href="#object-to-primitive-conversions">Object to Primitive Conversions</a></li>
          </ul>
        </li>
        <li><a href="#variable-declaration-and-assignment">Variable Declaration and Assignment</a>
          <ul>
            <li><a href="#declarations-with-let-and-const">Declarations with let and const</a></li>
            <li><a href="#variable-declarations-with-var">Variable Declarations with var</a></li>
            <li><a href="#destructuring-assignment">Destructuring Assignment</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#chapter-4">Chapter 4</a>
      <ul>
        <li><a href="#primary-expressions">Primary Expressions</a></li>
        <li><a href="#object-and-array-initializers">Object and Array Initializers</a></li>
        <li><a href="#property-access-expressions">Property Access Expressions</a></li>
        <li><a href="#operator-overview">Operator Overview</a></li>
      </ul>
    </li>
    <li><a href="#chapter-5">Chapter 5</a></li>
    <li><a href="#chapter-6">Chapter 6</a>
      <ul>
        <li><a href="#creating-objects">Creating Objects</a>
          <ul>
            <li><a href="#creating-objects-with-new">Creating Objects with new</a></li>
            <li><a href="#prototypes">Prototypes</a></li>
            <li><a href="#objectcreate">Object.create()</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav></div>
    </div>
</section>

  </div>
</aside>

      </div>
    </main>
   
    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  <span itemprop="copyrightYear">  &copy; 
  2017 - 2023</span>
  <span class="with-love"><i class="fa fa-heart"></i></span>
  <span class="author" itemprop="copyrightHolder">Keep It Simple</span>
</div>




      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
      <span id="scrollpercent"><span>0</span>%</span>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>
<script type="text/javascript" src="https://iihui.github.io/js/vendor/jquery/index.js?v=2.1.3"></script>
<script type="text/javascript" src="https://iihui.github.io/js/vendor/fastclick/lib/fastclick.min.js?v=1.0.6"></script> 
<script type="text/javascript" src="https://iihui.github.io/js/vendor/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
<script type="text/javascript" src="https://iihui.github.io/js/vendor/velocity/velocity.min.js?v=1.2.1"></script>
<script type="text/javascript" src="https://iihui.github.io/js/vendor/velocity/velocity.ui.min.js?v=1.2.1"></script>
<script src="https://iihui.github.io/js/vendor/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>

<script src="https://iihui.github.io/js/vendor/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>

<script type="text/javascript" src="https://iihui.github.io/js/utils.js"></script>
<script type="text/javascript" src="https://iihui.github.io/js/motion.js"></script>
<script type="text/javascript" src="https://iihui.github.io/js/affix.js"></script>
<script type="text/javascript" src="https://iihui.github.io/js/schemes/pisces.js"></script>

<script type="text/javascript" src="https://iihui.github.io/js/scrollspy.js"></script>
<script type="text/javascript" src="https://iihui.github.io/js/post-details.js"></script>
<script type="text/javascript" src="https://iihui.github.io/js/toc.js"></script>

<script type="text/javascript" src="https://iihui.github.io/js/bootstrap.js"></script>

<script type="text/javascript" src="https://iihui.github.io/js/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX", "output/HTML-CSS"],
    tex2jax: {
      inlineMath: [ ['$','$'] ],
      displayMath: [ ['$$','$$'] ],
      processEscapes: true
    },
    "HTML-CSS": { fonts: ["TeX"] }
  });
</script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML' async></script>
</body>
</html>